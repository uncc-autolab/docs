# Writing autograder for an assignment

This is brief guide for setting up an autograder in Autolab. The detailed documentation is available here:

```
https://autolab.github.io/docs/lab/
```

Once you create an assignment for your course from Autolab website, it can found on the server in the following location:

```bash
/root/autolab-oneclick/server/Autolab/courses/MY_COURSE/MY_ASSIGNMENT
```



A complete assignement with autograder has the following file structure:

```
| - MY_ASSIGNMENT
	| - Makefile              # You write this file to build autograde.tar, handout.tar, test-autograder
	| - autograde-Makefile    # You write this file to execute the autograder (autograde.tar) on student file
	| - autograde.tar	  # Built from Makefile
	| - handin		  # Leave untouched -- These are student submissions
	| - handout.tar		  # Built from Makefile -- Downloadable for students from the assignment web page
	| - log.txt		  # Leave untouched -- Submission logs
	| - regression.rb	  # Leave untouched -- Autogenerated
	| - regression.yml	  # Leave untouched -- Autogenerated
	| - src			  # All your codes and data used in evaluating assignment goes here.
	| - test-autograder	  # Built from Makefile. Used for testing your autograder before deployment.
```



**Sample Makefile**

```makefile
#
# Makefile to manage YOUR ASSIGNMENT
#

all: handout handout-tarfile autograde autograde-tarfile test-autograder

handout: 
	# Rebuild the handout directory that students download
	(rm -rf handout; mkdir handout)
	cp -rp src/handout handout 

handout-tarfile: handout
	# Build *-handout.tar
	tar cvf handout.tar handout
	rm -rf handout

autograde:
	(rm -rf autograde; mkdir autograde)
	cp -pr src/handout/* autograde        # Example: Copy biolerplate code to your autograder
	cp src/evaluate.py autograde	      # Example: Copy your evaluation script
	cp src/driver.sh autograde	      # Example: Copy the driver script that runs evaluation script


autograde-tarfile:
	tar cvf autograde.tar autograde
	rm -rf autograde

test-autograder:
	(rm -rf test-autograder; mkdir test-autograder)
	cp -p autograde-Makefile test-autograder/Makefile       # Makefile used to test autograder
	cp -p src/sample_submission.py test-autograder/		# Example: Copy a sample code to test autograder
	cp -p autograde.tar test-autograder/		        # Add the autograding code for testing


clean:
	# Clean the entire lab directory tree.  Note that you can run
	# "make clean; make" at any time while the lab is live with no
	# adverse effects.
	rm -f *~ *.tar
	rm -rf test-autograder

#
# CAREFULL!!! This will delete all student records in the logfile and
# in the handin directory. Don't run this once the lab has started.
# Use it to clean the directory when you are starting a new version
# of the lab from scratch, or when you are debugging the lab prior
# to releasing it to the students.
#
cleanallfiles:
	# Reset the lab from scratch.
	make clean
	rm -f log.txt
	rm -rf handin/*
```



**Sample autograde-Makefile**

```makefile
all:
	rm -rf autograde
	tar xf autograde.tar autograde           # This is your autograder
	cp  src/sample_submission.py autograde 	 # Add this sample submission
	(cd autograde; ./driver.sh)		 # Change to autograde folder and execute the driver
clean:
	rm -rf autograde
	rm -rf regression
```

